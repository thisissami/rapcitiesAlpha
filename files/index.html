<html>
   <head>
    <title>RapCities Alpha</title>
    <script type="text/javascript" src="http://localhost:8888/processing-1.3.6.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	    <script type="text/javascript" src="http://localhost:8888/soundmanager2.js"></script>
    <script type="text/javascript" src="http://xe-widgets.googlecode.com/svn-history/r10/trunk/widgets/xe_banner/skins/bannerSlider/js/slides.jquery.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
	<!--<link rel="stylesheet" type="text/css" href="jquery-ui-1.8.18.custom.css" />-->
    <link rel='stylesheet' src="http://slidesjs.com/examples/images-with-captions/css/global.css">
        <script type="text/javascript" src="http://localhost:8888/js/jquery-ui-1.8.18.custom.min.js"></script>
    
    <link type="text/css" href="http://localhost:8888/css/dark-hive/jquery-ui-1.8.18.custom.css" rel="stylesheet" />

    <style type="text/css">
      body {
        background-color: black;
        color: white;
		margin:0px;overflow:hidden;
      }
      h2 {
        font-size: 16px;
      }
      #canvas {
        /*width: 1158px;
        height: 635px;*/
        position: absolute;
        z-index: 0;
		/*left: 50%;
		margin-left:-479px;*/
		/*margin: auto;*/
      }
      #artist-info {
        position: absolute;
        z-index: -1;
        display: none;
        background-color: black;
        font: 15px Verdana, sans-serif;
		left: 50%;
		margin-left:-479px;
      }
      #top  {
        width: 700px;
        margin: 0 auto;
      }
      #top li {
        display: inline;
      }
      #center {
        float: left;
      }
      #popup {
        z-index: 2;
        float: left;
        display: none;
      }
      #popup a{
        color: white;
      }
      #popup-nav {
        height: 50px;
      }
      #popup-close {
        float: left;
      }
      #popup-url {
        float: right;
      }
      #center div {
        display: none;
      }
      #center div div {
        display: block;
      }
      td.square-td {
        width: 33%;
      }
      div.square {
        height: 166px;
        margin: 10px;
        text-overflow: ellipsis;
        overflow: hidden;
        padding: 12px;
      }
      div.square-hover {
        border: 2px solid white;
        padding: 10px;
      }
      .square a {
        text-decoration: underline;
        color: white;
      }
      .square p {
        font-size: 14px;
      }
      .type {
        float: left;
        width: 100px;
        height: 36px;
        padding-top: 16px;
        text-align: center;
        border: 2px solid white;
      }
      #close {
        font-weight: bold;
      }
      .selected-type {
        background-color: white;
        color: black;
      }
      .hover-type {
        background-color: white;
        color: black;
      }
      .never-hover-square {
        padding: 12px !important;
        border: none !important;
      }
      .square h2 {
        font-size: 16px;
        font-weight: bold;
      }
      .video {
        text-align: center;
      }
      .clear {
        clear: both;
      }
      iframe.popup {
        z-index: 2;
      }
      .video-thumbnail {
        width: 120px;
      }
      
      
      
      /* slides */
      .slides_container {
        width:570px;
        overflow:hidden;
        position:relative;
        display:none;
      }
      
      .slides_container div.slide {
        width:570px;
        display:block;
      }

	#dialogWindow{
		z-index:1;
		position:absolute;
		right:20px;
		top:296px;
	}
	#YouTubeP{
		z-index:1;
	}
	#legalDialog{
		z-index:3;
	}
	#legalbottom{
		z-index:2;
		position:absolute;
		bottom:0;
	}
	#parent{
		position:relative;
	}
    a {
      color: #CCCCCC;
      text-decoration: underline;
    }
    
    a:hover {
      color: #FFFFFF;
    }
    
    #userFavs {
	    font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;
	    font-size: 12px;
	    width: 480px;
	    text-align: left;
	    border-collapse: collapse;
	    border: 1px solid #FFFFFF;
	    background-color: #000;
	    margin:0 auto;
    }
    
    #userFavs th {
	    padding: 12px 17px 12px 17px;
	    font-weight: bold;
	    font-size: 14px;
	    color: #FFFFFF;
	    border-bottom: 1px dashed #FFFFFF;
    }
    
    #userFavs td {
	    padding: 7px 17px 7px 17px;
	    color: #FFFFFF;
    }
    
    #userFavs tbody tr:hover td {
	    color: #222222;
	    background: #CCCCCC;
    }
    
    #login-block {
      text-align:right;
      margin:0 auto;
      //width:271px; // this is size of other panel
      width:auto;
      color: #FFFFFF;
      background: #000000;
      		z-index:5;
		position:absolute;
		right:18px;
		top:10px;
		border: 2px solid #EEEEEE;
      padding: 6px 6px 6px 6px;
    }
    
    #toolbox {
      margin: 0 auto;
      left: 0px;
      top: 0px;
      width: auto;
      //height: 26px;
      background: #000000;
      z-index: 500;
      position: relative;
      overflow: visible;
      //display: none;
      float: left;
    }
    
    #fbLikeContainer {
      width: 91px;
      overflow: visible;
      display: inline-block;
    }
    
    #fbLikeContainer iframe {
    width: 91px !important;
}

#fbLikeContainer .fb_iframe_widget span {
	vertical-align:baseline;
}

#fbLikeContainer .fb_edge_comment_widget iframe {
    width: 400px !important;
}
    
    #fbLoginSpan {
      float:right;
    }
    </style>
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-32180049-1']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>
	<script type="text/javascript">
      $(document).ready(function(){
        var cvs = document.getElementById("canvas");
        var p = new Processing(cvs, 
(function(an){var k=(function(){function bj(){var bl=this;function bn(){an.extendClassChain(bl)}bl.x=0;bl.y=0;bl.hw=0;bl.hh=0;bl.invert=false;bl.pressedHere=false;function bq(){return an.mouseX>bl.x-bl.hw&&an.mouseX<bl.x+bl.hw&&an.mouseY>bl.y-bl.hh&&an.mouseY<bl.y+bl.hh}an.addMethod(bl,"pressed",bq);function br(bt,bu){bl.x=bt;bl.y=bu}an.addMethod(bl,"newPos",br);function bp(){}an.addMethod(bl,"mousePressed",bp);function bm(){}an.addMethod(bl,"mouseReleased",bm);function bo(){}an.addMethod(bl,"draw",bo);function bs(bu,bw,bt,bv){bn();bl.x=bu;bl.y=bw;bl.hw=bt;bl.hh=bv}function bk(){if(arguments.length===4){bs.apply(bl,arguments)}else{bn()}}bk.apply(null,arguments)}return bj})();an.Button=k;var ac=(function(){function bj(){var bq=this;function bk(){an.extendClassChain(bq)}bq.overlay=false;bq.HEART=0;bq.BASKET=1;bq.FACEREC=2;bq.LOGOUT=3;bq.ARTBIO=4;function bo(){an.fill(0);an.stroke(255);an.rectMode(an.CORNERS);an.rect(toolLeft,toolTop,toolLeft+toolWidth,toolTop+toolFull);an.shapeMode(an.CENTER);if(bf.list[playingVideo].fav){an.shape(a9,toolLeft+toolHalf,toolTop+toolHalf,toolHalf+4,toolHalf+2)}else{an.shape(z,toolLeft+toolHalf,toolTop+toolHalf,toolHalf+4,toolHalf+2)}an.imageMode(an.CENTER);an.image(n,toolLeft+toolHalf*3,toolTop+toolHalf);an.image(u,toolLeft+toolHalf*5,toolTop+toolHalf,toolFull-5,toolFull-5);an.image(c,toolLeft+toolHalf*7,toolTop+toolHalf);an.image(ai,toolLeft+toolHalf*9,toolTop+toolHalf);if(an.mouseY>toolTop&&an.mouseY<toolTop+toolFull&&an.mouseX>toolLeft&&an.mouseX<toolLeft+toolWidth){an.textSize(14);an.fill(0);an.stroke(255);an.rectMode(an.CORNERS);if(an.mouseX<toolLeft+toolFull){var br=null;if(bf.list[playingVideo].fav){br="Un-Heart Song"}else{br="Heart Song"}an.rect(toolLeft,toolTop-5,toolLeft+an.textWidth(br)+4,toolTop-25);an.fill(255);an.text(br,toolLeft+2,toolTop-23);toolHover=bq.HEART}else{if(an.mouseX>toolLeft+toolFull&&an.mouseX<toolLeft+toolFull*2){an.rect(toolLeft+toolFull,toolTop-5,toolLeft+toolFull+an.textWidth("View HeartBasket")+4,toolTop-25);an.fill(255);an.text("View HeartBasket",toolLeft+toolFull+2,toolTop-23);toolHover=bq.BASKET}else{if(an.mouseX>toolLeft+toolFull*2&&an.mouseX<toolLeft+toolFull*3){an.rect(toolLeft+toolFull*2,toolTop-5,toolLeft+toolFull*2+an.textWidth("Recommend Song on Facebook")+4,toolTop-25);an.fill(255);an.text("Recommend Song on Facebook",toolLeft+toolFull*2+2,toolTop-23);toolHover=bq.FACEREC}else{if(an.mouseX>toolLeft+toolFull*3&&an.mouseX<toolLeft+toolFull*4){an.rect(toolLeft+toolFull*3,toolTop-5,toolLeft+toolFull*3+an.textWidth("Artist Biography")+4,toolTop-25);an.fill(255);an.text("Artist Biography",toolLeft+toolFull*3+2,toolTop-23);toolHover=bq.ARTBIO}else{if(an.mouseX>toolLeft+toolFull*4&&an.mouseX<toolLeft+toolFull*5){an.rect(toolLeft+toolFull*4,toolTop-5,toolLeft+toolFull*4+an.textWidth("Logout")+4,toolTop-25);an.fill(255);an.text("Logout",toolLeft+toolFull*4+2,toolTop-23);toolHover=bq.LOGOUT}}}}}}else{toolHover=-1}}an.addMethod(bq,"draw",bo);function bl(){switch(toolHover){case"B241":break;console.log("heart");if(bf.list[playingVideo].fav){$.get("http://localhost:8888/removeSong",{songid:artist.RID+" "+artist.topTracks[av].RID});bf.list[playingVideo].fav=false}else{$.get("http://localhost:8888/addSong",{songid:artist.RID+" "+artist.topTracks[av].RID});bf.list[playingVideo].fav=true}break;case"B255":break;bq.$self.showAndFillOverlay();break;case (bq.LOGOUT):an.link("http://localhost:8888/logout");break;case"B259":break;case"B260":break;U();break}}an.addMethod(bq,"mouseClicked",bl);function bm(){console.log("here");if(bq.overlay){$("#overlay").dialog("close");bq.overlay=true}else{$.get("http://localhost:8888/seeSongs",function(br){$("#overlay").html(br).dialog("open");bq.overlay=false})}}an.addMethod(bq,"showAndFillOverlay",bm);function bn(){bk();bq.overlay=false;toolHover=-1;toolTop=ak;toolFull=40;toolHalf=toolFull/2;toolWidth=200;toolLeft=an.width/2-toolWidth/2}function bp(){if(arguments.length===0){bn.apply(bq,arguments)}else{bk()}}bp.apply(null,arguments)}return bj})();an.Toolbox=ac;var G=(function(){function bj(){var bq=this;function bo(){an.extendClassChain(bq)}bq.miniNYC=null;bq.NYCx=1000;bq.NYCy=711;bq.ox=0;bq.oy=0;bq.ocx=0;bq.ocy=0;bq.allX=0;bq.allY=0;bq.widths=null;bq.heights=null;bq.ominx=0;bq.ominy=0;bq.minix=0;bq.miniy=0;bq.maxix=0;bq.maxiy=0;bq.opressed=false;bq.miniPressed=false;bq.once=false;function bn(){bq.$self.drawMap();bq.$self.drawLocations();an.fill(0);an.noStroke();an.rectMode(an.CORNERS);bq.$self.drawMini()}an.addMethod(bq,"draw",bn);function bl(){an.imageMode(an.CENTER);var bF=0;var bI=0;var bH=0;for(bH=0;bH<8;bH++){bF+=bq.widths[bH];if(bF>a4){break}}var bG=0;for(bG=0;bG<8;bG++){bI+=bq.heights[bG];if(bI>a2){break}}bq.$self.grimage(bG,bH,0+aw/2-(bq.widths[bH]/2-(bF-a4)),0+ad/2-(bq.heights[bG]/2-(bI-a2)));if(bG>0){bq.$self.grimage(bG-1,bH,0+aw/2-(bq.widths[bH]/2-(bF-a4)),0+ad/2-bq.heights[bG]-(bq.heights[bG-1]/2-(bI-a2))+1)}if(bH>0){bq.$self.grimage(bG,bH-1,0+aw/2-bq.widths[bH]-(bq.widths[bH-1]/2-(bF-a4))+1,0+ad/2-(bq.heights[bG]/2-(bI-a2)))}if(bG<7){bq.$self.grimage(bG+1,bH,0+aw/2-(bq.widths[bH]/2-(bF-a4)),0+ad/2+bq.heights[bG+1]/2+(bI-a2)-1)}if(bH<7){bq.$self.grimage(bG,bH+1,0+aw/2+bq.widths[bH+1]/2+(bF-a4)-1,0+ad/2-(bq.heights[bG]/2-(bI-a2)))}if(bG>0&&bH>0){bq.$self.grimage(bG-1,bH-1,0+aw/2-bq.widths[bH]-(bq.widths[bH-1]/2-(bF-a4))+1,0+ad/2-bq.heights[bG]-(bq.heights[bG-1]/2-(bI-a2))+1)}if(bG>0&&bH<7){bq.$self.grimage(bG-1,bH+1,0+aw/2+bq.widths[bH+1]/2+(bF-a4)-1,0+ad/2-bq.heights[bG]-(bq.heights[bG-1]/2-(bI-a2))+1)}if(bG<7&&bH<7){bq.$self.grimage(bG+1,bH+1,0+aw/2+bq.widths[bH+1]/2+(bF-a4)-1,0+ad/2+bq.heights[bG+1]/2+(bI-a2)-1)}if(bG<7&&bH>0){bq.$self.grimage(bG+1,bH-1,0+aw/2-bq.widths[bH]-(bq.widths[bH-1]/2-(bF-a4))+1,0+ad/2+bq.heights[bG+1]/2+(bI-a2)-1)}}an.addMethod(bq,"drawMap",bl);function bt(bG,bI,bH,bF){if(artmode){if(artgrid[bG][bI]){if(artgrid[bG][bI].width>0){an.image(artgrid[bG][bI],bH,bF)}else{bq.$self.drawLoadingBlock(bG,bI,bH,bF)}}else{if(!artgridLoad[bG][bI]){aS(bG,bI);bq.$self.drawLoadingBlock(bG,bI,bH,bF)}}}else{if(aj[bG][bI]){if(aj[bG][bI].width>0){an.image(aj[bG][bI],bH,bF)}else{bq.$self.drawLoadingBlock(bG,bI,bH,bF)}}else{if(!Z[bG][bI]){aW(bG,bI);bq.$self.drawLoadingBlock(bG,bI,bH,bF)}}}}an.addMethod(bq,"grimage",bt);function bx(bG,bI,bH,bF){an.rectMode(an.CENTER);an.noStroke();an.fill(0);an.rect(bH,bF,bq.widths[bG],bq.heights[bI]);an.textSize(30);an.fill(255);an.text("Loading Map Section",bH,bF)}an.addMethod(bq,"drawLoadingBlock",bx);function bA(){an.imageMode(an.CORNERS);an.image(bq.miniNYC,al,v,w,aq);an.rectMode(an.CENTER);an.noFill();an.strokeWeight(1);an.stroke(aL[0]);an.rect(al+ag,v+af,aO,aN);an.ellipseMode(an.CENTER);for(var bF=0;bF<aU.size();bF++){var bG=aU.get(bF);an.fill(aL[bG.type]);an.stroke(aL[bG.type]);if(bf&&bG._id==bf._id){an.ellipse(an.map(bG.x,531.749,531.749+853,al,w),an.map(bG.y,231.083,231.083+810,v,aq),5,5)}else{an.ellipse(an.map(bG.x,531.749,531.749+853,al,w),an.map(bG.y,231.083,231.083+810,v,aq),3,3)}}}an.addMethod(bq,"drawMini",bA);function bv(){aw=P;ad=a1;aO=an.map(aw,0,bd,0,284);aN=an.map(ad,0,aI,0,270);a4=2600;a2=4100;ag=an.map(a4,0,bd,0,284);af=an.map(a2,0,aI,0,270);bq.widths=new Array(1000,1000,1000,1000,1000,1000,1000,1000);bq.heights=new Array(950,950,950,950,950,950,950,950);bq.allX=1000*8;bq.allY=950*8;bq.$self.setMins()}an.addMethod(bq,"prep",bv);function bs(){if(an.mouseX>al&&an.mouseY>v&&an.mouseX<w&&an.mouseY<aq){bq.miniPressed=true;ag=an.min(an.max(aO/2,an.mouseX-al),284-aO/2);af=an.min(an.max(aN/2,an.mouseY-v),270-aN/2);bq.$self.miniToMaxi()}}an.addMethod(bq,"miniMousePressed",bs);function bu(){if(bq.miniPressed){ag=an.min(an.max(aO/2,an.mouseX-al),284-aO/2);af=an.min(an.max(aN/2,an.mouseY-v),270-aN/2);bq.$self.miniToMaxi()}}an.addMethod(bq,"miniMouseDragged",bu);function bk(){a4=an.map(ag,0,284,0,bd);a2=an.map(af,0,270,0,aI);bq.$self.setMins()}an.addMethod(bq,"miniToMaxi",bk);function bB(){bq.miniPressed=false}an.addMethod(bq,"miniMouseReleased",bB);function bC(){if(an.key==an.CODED){switch(an.keyCode){case (an.UP):af=an.max(af-1,aN/2);bq.$self.miniToMaxi();break;case (an.DOWN):af=an.min(af+1,270-aN/2);bq.$self.miniToMaxi();break;case (an.LEFT):ag=an.max(ag-1,aO/2);bq.$self.miniToMaxi();break;case (an.RIGHT):ag=an.min(ag+1,284-aO/2);bq.$self.miniToMaxi();break}}}an.addMethod(bq,"keyPressed",bC);function bp(){an.imageMode(an.CENTER);X=-1;for(var bG=0;bG<aU.size();bG++){var bI=aU.get(bG);if(bI.x<a6+10&&bI.x>E-10&&bI.y<a3+15&&bI.y>C-15&&a0.get(bI.type).width>0){var bF=an.map(bI.x,E,a6,0,P);var bJ=an.map(bI.y,C,a3,0,a1);if(an.mouseX<bF+15&&an.mouseX>bF-15&&an.mouseY<bJ+15&&an.mouseY>bJ-15&&(an.mouseX<al||an.mouseX>w||an.mouseY<ak||an.mouseY>aq)){an.image(a0.get(bI.type),bF,bJ);X=bG}else{if(bf&&bI._id==bf._id){an.image(a0.get(bI.type),bF,bJ);an.textSize(18);var bH=an.textWidth(bI.title);an.stroke(aL[bI.type]);an.fill(0);an.rectMode(an.CENTER);an.rect(bF,bJ-40,bH+12,26,10);an.fill(aL[bI.type]);an.textAlign(an.LEFT,an.TOP);an.text(bI.title,bF-bH/2,bJ-50)}else{an.image(a0.get(bI.type),bF,bJ)}}}}}an.addMethod(bq,"drawLocations",bp);function bw(){bq.ox=an.mouseX;bq.oy=an.mouseY;bq.ocx=a4;bq.ocy=a2;bq.ominx=E;bq.ominy=C;bq.opressed=true}an.addMethod(bq,"mousePressed",bw);function bE(){if(bq.opressed){a4=bq.ocx-(an.mouseX-bq.ox);a2=bq.ocy-(an.mouseY-bq.oy);if(a4>bd-aw/2){a4=bd-aw/2}if(a4<aw/2){a4=aw/2}if(a2<ad/2){a2=ad/2}if(a2>aI-ad/2){a2=aI-ad/2}ag=an.map(a4,0,bd,0,284);af=an.map(a2,0,aI,0,270);bq.$self.setMins()}}an.addMethod(bq,"mouseDragged",bE);function bm(){E=an.map(a4-aw/2,0,bd,531.749,531.749+853);a6=an.map(a4+aw/2,0,bd,531.749,531.749+853);C=an.map(a2-ad/2,0,aI,231.083,231.083+810);a3=an.map(a2+ad/2,0,aI,231.083,231.083+810)}an.addMethod(bq,"setMins",bm);function bD(){bq.opressed=false}an.addMethod(bq,"mouseReleased",bD);function by(){bq.opressed=false}an.addMethod(bq,"mouseOut",by);function br(){bo();bq.miniNYC=an.loadImage("http://localhost:8888/miniNYC.png");bq.ox=bq.oy=-1;bq.$self.prep()}function bz(){if(arguments.length===0){br.apply(bq,arguments)}else{bo()}}bz.apply(null,arguments)}return bj})();an.Map=G;var K=(function(){function bj(){var bn=this;var bq={$upcast:bn};function bp(){k.apply(bq,arguments);if(!("$self" in bq)){an.extendClassChain(bq)}}bn.play=false;function bl(){return bn.play}an.addMethod(bn,"paused",bl);function bt(){if(bq.pressed()){bn.invert=true;bn.pressedHere=true}}an.addMethod(bn,"mousePressed",bt);function br(){if(bq.pressed()&&bn.pressedHere){bn.invert=true}else{bn.invert=false}}an.addMethod(bn,"mouseDragged",br);function bo(){if(bn.invert&&bn.pressedHere){if(aC&&q==ao){song.togglePause()}else{if(q==be){if(a5.getPlayerState()==2){a5.playVideo()}else{a5.pauseVideo()}}}bn.invert=false}bn.pressedHere=false}an.addMethod(bn,"mouseReleased",bo);function bk(){if(q==ao&&aC){if(song!=null&&song.playState==1){if(song.paused){if(!M){bn.play=true}}else{bn.play=false}}else{bn.play=true}}else{if(q==be){if(a5.getPlayerState()==2||a5.getPlayerState()==-1){if(!M){bn.play=true}}else{bn.play=false}}}}an.addMethod(bn,"update",bk);function bs(){if(bn.invert){an.fill(255);an.noStroke()}else{an.noFill();if(bq.pressed()){an.stroke(255)}else{an.noStroke()}}an.rect(bn.x-bn.hw,bn.y-bn.hh,bn.x+bn.hw,bn.y+bn.hh);if(bn.invert){an.fill(0);an.noStroke()}else{an.fill(255);an.noStroke()}if(bn.play){an.triangle(bn.x-bn.hw/2,bn.y-bn.hh/2,bn.x-bn.hw/2,bn.y+bn.hh/2,bn.x+bn.hw/2,bn.y)}else{an.rect(bn.x-bn.hw/2,bn.y-bn.hh/2,bn.x-1,bn.y+bn.hh/2);an.rect(bn.x+bn.hw/2,bn.y-bn.hh/2,bn.x+1,bn.y+bn.hh/2)}}an.addMethod(bn,"draw",bs);function bu(bw,by,bv,bx){bp(bw,by,bv,bx);bn.play=true}function bm(){if(arguments.length===4){bu.apply(bn,arguments)}else{bp()}}bm.apply(null,arguments)}an.extendStaticMembers(bj,k);bj.$base=k;return bj})();an.Play=K;var Q=(function(){function bj(){var bl=this;var bo={$upcast:bl};function bn(){k.apply(bo,arguments);if(!("$self" in bo)){an.extendClassChain(bo)}}bl.invert=false;bl.pressed=false;function br(){if(bo.pressed()){bl.invert=true;bl.pressedHere=true}}an.addMethod(bl,"mousePressed",br);function bp(){if(bo.pressed()&&bl.pressedHere){bl.invert=true}else{bl.invert=false}}an.addMethod(bl,"mouseDragged",bp);function bm(){if(bl.invert&&bl.pressedHere){bh();bl.invert=false}bl.pressedHere=false}an.addMethod(bl,"mouseReleased",bm);function bq(){if(bl.invert){an.fill(255);an.noStroke()}else{if(bo.pressed()){an.textSize(14);var bt=an.textWidth("Next Plot");an.fill(0);an.stroke(255);an.rect(bl.x-bt/2-3,bl.y+15,bl.x+bt/2+3,bl.y+35);an.textAlign(an.CENTER,an.TOP);an.fill(255);an.text("Next Plot",bl.x,bl.y+17);an.noFill()}else{an.noStroke();an.noFill()}}an.rect(bl.x-bl.hw,bl.y-bl.hh,bl.x+bl.hw,bl.y+bl.hh);if(bl.invert){an.fill(0);an.noStroke()}else{an.fill(255);an.noStroke()}an.rect(bl.x-3,bl.y-bl.hh/2,bl.x-6,bl.y+bl.hh/2);an.triangle(bl.x,bl.y-bl.hh/2,bl.x,bl.y+bl.hh/2,bl.x+bl.hw/2+1,bl.y)}an.addMethod(bl,"draw",bq);function bs(bu,bw,bt,bv){bn(bu,bw,bt,bv);bl.invert=false}function bk(){if(arguments.length===4){bs.apply(bl,arguments)}else{bn()}}bk.apply(null,arguments)}an.extendStaticMembers(bj,k);bj.$base=k;return bj})();an.Forward=Q;var x=(function(){function bj(){var bn=this;function bq(){an.extendClassChain(bn)}bn.panel=bc;bn.margin=10;bn.slant=2;bn.num=0;bn.mouseMainPaneControl=-1;bn.mouseSort=-1;bn.mouseFilter=0;bn.genreFilter=0;bn.mouseOnTitle=0;bn.mouseGenre=-1;bn.colorIcon=null;bn.sortIcon=null;bn.names=[" Current Info"," Color Mode","Sorting"];bn.currentColor=0;bn.pageToShow=0;bn.totalPagesToShow=1;function bs(){bn.$self.drawControl();if(!bf){bn.$self.printNoSong()}else{bn.$self.printLocation()}}an.addMethod(bn,"draw",bs);function bu(){}an.addMethod(bn,"mousePressed",bu);function bp(){}an.addMethod(bn,"mouseReleased",bp);function bw(){an.fill(0);an.strokeWeight(2);an.stroke(255);an.rectMode(an.CORNERS);an.rect(al,aR,w+1,v);an.textSize(15);an.rectMode(an.CORNERS);an.noFill();an.rect(al,aq,w+1,v)}an.addMethod(bn,"drawControl",bw);function bx(){if(bf&&bf.list){while(bn.pageToShow*songsToShow>=bf.list.length){bn.pageToShow--}bn.totalPagesToShow=an.ceil(bf.list.length/songsToShow)}}an.addMethod(bn,"resetSize",bx);function bt(){bn.pageToShow=0}an.addMethod(bn,"resetPage",bt);function bv(){bn.pageToShow++}an.addMethod(bn,"nextPage",bv);function br(){bn.pageToShow--}an.addMethod(bn,"previousPage",br);function bo(){an.textAlign(an.LEFT,an.TOP);an.textSize(22);an.fill(aL[bf.type]);i(bf.title,al+10,aR+10,200,0,22);an.fill(255);an.textSize(16);j=-1;if(bf.list){var bz=an.min(songsToShow,bf.list.length-bn.pageToShow*songsToShow);var bA=bn.pageToShow*songsToShow;for(var by=bA;by<bA+bz;by++){if(by==playingVideo){an.fill(aL[bf.type]);i(bf.list[by].title,al+20,aR+35+(by-bA)*22,248,aL[bf.type],30);an.fill(255)}else{if(an.mouseX>al+20&&an.mouseY<aR+35+(by-bA+1)*22&&an.mouseY>aR+35+(by-bA)*22){an.fill(aL[bf.type]);i(bf.list[by].title,al+20,aR+35+(by-bA)*22,248,aL[bf.type],30);j=by;an.fill(255)}else{i(bf.list[by].title,al+20,aR+35+(by-bA)*22,248,an.color(255),30)}}}if(songsToShow<bf.list.length){an.textSize(14);an.text(bn.pageToShow+1+"/"+bn.totalPagesToShow,w-46,aR+30+songsToShow*22);if(bn.pageToShow>0&&an.mouseX>w-64&&an.mouseX<w-46&&an.mouseY<aR+43+songsToShow*22&&an.mouseY>aR+35+songsToShow*22){an.fill(aL[2]);an.text((new an.Character("<")),w-58,aR+30+songsToShow*22);an.text((new an.Character("<")),w-64,aR+30+songsToShow*22);an.fill(255);r=true}else{r=false;an.text((new an.Character("<")),w-58,aR+30+songsToShow*22);an.text((new an.Character("<")),w-64,aR+30+songsToShow*22)}if(bn.pageToShow<bf.list.length/songsToShow-1&&an.mouseX>w-23&&an.mouseX<w-7&&an.mouseY<aR+43+songsToShow*22&&an.mouseY>aR+35+songsToShow*22){an.fill(aL[2]);an.text((new an.Character(">")),w-22,aR+30+songsToShow*22);an.text((new an.Character(">")),w-16,aR+30+songsToShow*22);an.fill(255);ar=true}else{ar=false;an.text((new an.Character(">")),w-22,aR+30+songsToShow*22);an.text((new an.Character(">")),w-16,aR+30+songsToShow*22)}}}else{an.text(bf.info,al+20,aR+35,248,w-al+20)}}an.addMethod(bn,"printLocation",bo);function bm(){an.textAlign(an.LEFT);an.fill(255);an.textSize(16);an.text("Welcome to RapCities! Here you can explore how the sound of Hip-Hop and Rap changes from neighborhood to neighborhood in New York City!\n\nIf you find an artist you want to check out, just click on their icon, and you'll get to sample some of their most popular tunes.\n\n",al+20,aR+35,w-al-40,a1-aR)}an.addMethod(bn,"printNoSong",bm);function bk(bA,bz){bq();al=bA;ak=bz;J=57;aR=ak;w=P-aF;r=ar=false;if(a1<870){var by=870;var bB=0;while(by>a1&&bB<5){by-=22;bB++}v=ak+558-J-bB*22;$("#dialogWindow").css("top",353-bB*22-J);songsToShow=10-bB;D=v-18}else{v=ak+558-J}aq=v+270;bn.num=bn.names.length;an.textSize(16)}function bl(){if(arguments.length===2){bk.apply(bn,arguments)}else{bq()}}bl.apply(null,arguments)}return bj})();an.SidePane=x;var p=(function(){function bj(){var bo=this;function bm(){an.extendClassChain(bo)}bo.play=null;bo.ffwd=null;bo.pressedInSeekBar=false;bo.onVol=false;bo.onVolGen=false;bo.volDragged=false;bo.songPausedToBeginWith=false;bo.stillWithinSeekBar=false;bo.totTime=null;bo.total=0;function bl(){if(q==be||(q==ao&&aC)){an.rectMode(an.CORNERS);bo.play.update();bo.play.draw();bo.ffwd.draw();bo.$self.drawSeekBar();bo.$self.drawVolume();if(bo.onVolGen){bo.$self.drawVolumeSetter()}an.rectMode(an.CENTER);an.ellipseMode(an.CENTER_RADIUS)}}an.addMethod(bo,"draw",bl);function br(){bo.play.mousePressed();bo.ffwd.mousePressed();bo.$self.checkSeekBar();bo.$self.checkVol()}an.addMethod(bo,"mousePressed",br);function bA(){bo.play.mouseDragged();bo.ffwd.mouseDragged();bo.$self.dragSeekBar();bo.$self.dragVol()}an.addMethod(bo,"mouseDragged",bA);function bB(){bo.play.mouseReleased();bo.ffwd.mouseReleased();bo.$self.releaseSeekBar();bo.$self.releaseVol()}an.addMethod(bo,"mouseReleased",bB);function bs(){if(an.mouseX>au-10&&an.mouseX<au+2&&an.mouseY>D-6&&an.mouseY<D+6){return true}return false}an.addMethod(bo,"onVolume",bs);function bC(){if(an.mouseX>au-volS-10&&an.mouseX<au+20&&an.mouseY>D-volY&&an.mouseY<D+volY){return true}return false}an.addMethod(bo,"onVolumeSetter",bC);function bk(){if(bo.$self.onVolume()){bo.onVol=true;an.stroke(255)}else{an.noStroke();bo.onVol=false}an.fill(255);an.triangle(au-10,D,au,D-7,au,D+7);an.rect(au-10,D+3,au-3,D-3);an.stroke(255);an.strokeWeight(2);an.noFill();an.ellipseMode(an.RADIUS);if(!bg){if(W>80){an.arc(au+6,D,12,12,-(an.PI/3),an.PI/3)}if(W>60){an.arc(au+5,D,9,9,-(an.PI/3),an.PI/3)}if(W>40){an.arc(au+4,D,6,6,-(an.PI/3),an.PI/3)}if(W>20){an.arc(au+3,D,3,3,-(an.PI/3),an.PI/3)}}else{an.stroke(aL[0]);an.line(au-9,D-8,au+2,D+7)}if(bo.$self.onVolumeSetter()){bo.onVolGen=true}else{if(!bo.volDragged){bo.onVolGen=false}}}an.addMethod(bo,"drawVolume",bk);function bw(){if(bo.onVol){bo.$self.toggleMute()}else{if(bo.onVolGen&&an.mouseX>au-volS-5&&an.mouseX<au-volS+5&&an.mouseY>D-volY&&an.mouseY<D+volY){bo.volDragged=true;W=(D+volY-an.mouseY)/volD;if(q==ao){song.setVolume(W)}else{if(q==be){a5.setVolume(W)}}}}}an.addMethod(bo,"checkVol",bw);function bD(){if(bo.volDragged){if(an.mouseY>D+volY){W=0}else{if(an.mouseY<D-volY){W=100}else{W=(D+volY-an.mouseY)/volD}}if(q==ao){song.setVolume(W)}else{if(q==be){a5.setVolume(W)}}}}an.addMethod(bo,"dragVol",bD);function bv(){if(bo.volDragged){bo.volDragged=false}}an.addMethod(bo,"releaseVol",bv);function bq(){an.stroke(255);an.strokeWeight(2);an.fill(0);an.rect(au-volS-5,D-volY,au-volS+5,D+volY);if(W>0){an.fill(aL[2]);an.noStroke();an.rect(au-volS-4,D+volY-1,au-volS+4,D+volY+1-W*volD)}}an.addMethod(bo,"drawVolumeSetter",bq);function bn(){if(q==ao&&aC){song.toggleMute()}else{if(q==be){if(a5.isMuted()){a5.unMute()}else{a5.mute()}}}bg=!bg}an.addMethod(bo,"toggleMute",bn);function bx(){if((q==ao&&aC)||q==be){if(an.mouseX>ba&&an.mouseX<seekRight&&an.mouseY>D-10&&an.mouseY<D+10){M=true;bo.stillWithinSeekBar=true;if((q==ao&&song.paused)||(q==be&&a5.getPlayerState()==2)){bo.songPausedToBeginWith=true}else{bo.songPausedToBeginWith=false}if(q==ao){song.pause()}else{a5.pauseVideo()}}}}an.addMethod(bo,"checkSeekBar",bx);function bz(){if(q==be||(q==ao&&aC)){if(M){if(an.mouseX>ba&&an.mouseX<seekRight&&an.mouseY>D-10&&an.mouseY<D+10){var bF=0;if(q==ao){if(song!=null&&song.readyState==1){bF=song.durationEstimate}else{if(song!=null&&song.readyState==3){bF=song.duration}}var bE=an.__int_cast(an.map(an.mouseX,ba,seekRight,0,bF));if(!bo.songPausedToBeginWith){song.resume()}song.setPosition(bE)}else{var bE=an.__int_cast(an.map(an.mouseX,ba,seekRight,0,a5.getDuration()));a5.seekTo(bE,true);if(!bo.songPausedToBeginWith){a5.playVideo()}}}M=false;bo.stillWithinSeekBar=false;if(!bo.songPausedToBeginWith){if(q==ao){song.resume()}else{a5.playVideo()}}}}}an.addMethod(bo,"releaseSeekBar",bz);function bt(){if(q==be||(q==ao&&aC)){if(M){if(an.mouseX>ba&&an.mouseX<seekRight&&an.mouseY>D-10&&an.mouseY<D+10){bo.stillWithinSeekBar=true}else{bo.stillWithinSeekBar=false}}}}an.addMethod(bo,"dragSeekBar",bt);function bu(){an.stroke(255);an.strokeWeight(3);if(q==be&&a5.getPlayerState()==-1){an.fill(255);an.textSize(19);an.textAlign(an.LEFT,an.CENTER);an.text("-:--/-:--",ay-28-ah,D)}if((q==ao&&song!=null&&song.readyState==1)||q==be&&a5.getPlayerState()==3){an.strokeWeight(1);an.line(ba,D,seekRight,D);an.strokeWeight(3);var bE=0;if(q==ao){bE=an.map(song.bytesLoaded,0,song.bytesTotal,ba,seekRight)}else{bE=an.map(a5.getVideoBytesLoaded(),0,a5.getVideoBytesTotal(),ba,seekRight)}if(bE>=0){an.line(ba,D,bE,D)}}else{an.line(ba,D,seekRight,D)}if((q==ao&&song!=null&&(song.readyState==1||song.readyState==3))||(q==be&&a5.getPlayerState()>0)){var bF=null;if(!M||!bo.stillWithinSeekBar){var bE=0;if(q==ao){if(song.readyState==1){bo.total=song.durationEstimate;bo.totTime=aX(bo.total/1000)}else{if(song.readyState==3){bo.total=song.duration;bo.totTime=aX(bo.total/1000)}}bF=aX(song.position/1000);bE=an.map(song.position,0,bo.total,ba,seekRight)}else{if(q==be){bo.total=a5.getDuration();bo.totTime=aX(bo.total);bF=aX(a5.getCurrentTime());bE=an.map(a5.getCurrentTime(),0,bo.total,ba,seekRight)}}if(bE>=0){an.line(bE,D-10,bE,D+10)}}else{an.line(an.mouseX,D-10,an.mouseX,D+10);var bG=an.map(an.mouseX,ba,seekRight,0,bo.total);if(q==ao){bG/=1000}bF=aX(bG)}an.fill(255);an.textSize(15);an.textAlign(an.LEFT,an.CENTER);an.text(bF+"/"+bo.totTime,ay-30-ah,D)}an.strokeWeight(1)}an.addMethod(bo,"drawSeekBar",bu);function bp(){bm();aJ=al;ay=w;o=v-230;a7=v;ah=an.textWidth("0:00/0:00");ba=al+95;D=v-18;bo.play=new K(al+72,D,10,10);bo.ffwd=new Q(w-20,D,10,10);au=al+40;volY=15;volD=0.3;volS=20;seekRight=w-40-ah;an.textSize(15)}function by(){if(arguments.length===0){bp.apply(bo,arguments)}else{bm()}}by.apply(null,arguments)}return bj})();an.Current=p;var am=(function(){function bj(){var bp=this;function br(){an.extendClassChain(bp)}function bo(bx){$("#popup-content").attr("src",bx);$("#popup-url").attr("href",bx);$("#center").hide();$("#popup").show()}function bu(by){var bx="<table><tr>";$.each(by,function(bz,bA){bx+="<td class='square-td'><div class='square' data-url='"+bA.url+"'><h2>"+bA.site+"</h2><p>"+bt(bA.text)+"</p></div></td>";if(bz==8){bx+="</tr>";return false}else{if((bz+1)%3==0){bx+="</tr><tr>"}}});$("#biographies").html(bx)}function bt(bx){return bx.substr(0,250)+"..."}function bn(by){var bx="<table><tr>";$.each(by,function(bz,bA){bx+="<td class='square-td'><div class='square' data-url='"+bA.url+"'><h2>"+bA.name+"</h2><p>"+bt(bA.summary)+"</p></div></td>";if(bz==8){bx+="</tr>";return false}else{if((bz+1)%3==0){bx+="</tr><tr>"}}});$("#blogs").html(bx)}function bw(bx){}function bv(by){var bx="<table><tr>";$.each(by,function(bz,bA){bx+="<td class='square-td'><div class='square' data-url='"+bA.url+"'><h2>"+bA.name+"</h2><p>"+bt(bA.summary)+"</p></div></td>";if(bz==8){bx+="</tr>";return false}else{if((bz+1)%3==0){bx+="</tr><tr>"}}});$("#news").html(bx)}function bs(by){var bx="<table><tr>";$.each(by,function(bz,bA){bx+="<td class='square-td'><div class='square video' data-url='"+bA.url+"'><h2>"+bA.title+"</h2><img class='video-thumbnail' src='"+bA.image_url+"'></div></td>";if(bz==8){bx+="</tr>";return false}else{if((bz+1)%3==0){bx+="</tr><tr>"}}});$("#videos").html(bx)}function bm(bx){$("#center").children().css("display","none");$("#"+bx).css("display","block")}bp.canvas=document.getElementById("canvas");bp.selectDiv=document.getElementById("artist-info");bp.selectDivHeight=635;bp.selectDivWidth=1158;bp.selectDivX=9;bp.selectDivY=9;function bq(bx){bp.selectDiv.style.width=bp.selectDivWidth;bp.selectDiv.style.height=bp.selectDivHeight;bp.selectDiv.style.top=bp.selectDivY+"px";bp.selectDiv.style.zIndex=1;$("#center, #popup, #popup-nav, #popup-content").css("width",bp.selectDivWidth+"px");$("#popup-content").css("height",bp.selectDivHeight+"px");$.getJSON("http://localhost:8888/getArtistInfo?id="+bx,function(by){bu(by.biographies);bn(by.blogs);bw(by.images);bv(by.news);bs(by.videos);$(".square").hover(function(){$(this).addClass("square-hover")},function(){$(this).removeClass("square-hover")}).click(function(){bo($(this).data("url"))});$("#close").click(function(){$("#artist-info").css("z-index","-1")})});$(".type").click(function(){bm($(this).data("type"));$(".type").removeClass("selected-type");$(this).addClass("selected-type");$("#popup").hide();$("#center").show()}).hover(function(){$(this).addClass("hover-type")},function(){$(this).removeClass("hover-type")});$("#popup-close").click(function(){$("#popup").hide();$("#center").show()})}an.addMethod(bp,"showArtistInfo",bq);function bk(){br()}function bl(){if(arguments.length===0){bk.apply(bp,arguments)}else{br()}}bl.apply(null,arguments)}return bj})();an.ArtistInfo=am;var aC=false;var aG=null;var aL=null;var m=null;var L=null;var B=null;var Y=null;var l=null;var T=null;var aj=null,Z=null;var az=0;var A=1;var P=0,a1=0,h=0,H=0;var bd=0,aI=0;var aF=0,aE=0,f=0,a8=0;var aq=0;var ax=null;var aA=0;var bb=0;var d=1;function aM(){P=an.max(700,$(window).width());a1=an.max(770,$(window).height());aH();var bl=an.__split(window.location.pathname,(new an.Character("/")));if(bl.length>0&&bl[0]!="songid"){if(bl.length<3){ax=bl[1]}else{ax=bl[3]}}logo=an.loadImage("http://localhost:8888/logo");$("#parent").css("width",P).css("height",a1);if(P==700||a1==770){$("body").css("overflow","visible")}f=1920;a8=1000;aF=20;aE=30;h=30;H=0;aI=950*8;bd=1000*8;ap();ae=new an.ArrayList();songsToShow=10;artmode=false;an.size(P,a1);an.frameRate(30);an.smooth();an.rectMode(an.CORNERS);an.ellipseMode(an.CENTER_RADIUS);aC=false;aG=an.createFont("Arial",13);an.textFont(aG);at();songs=new an.ArrayList();B=new an.HashMap();l=new x(P-aF-284,aE);toolBox=new ac();Y=new p();T=new G();aj=new Array(8);Z=new Array(8);artgrid=new Array(8);artgridLoad=new Array(8);for(var bk=0;bk<8;bk++){aj[bk]=new Array(8);Z[bk]=new Array(8);artgrid[bk]=new Array(8);artgridLoad[bk]=new Array(8);for(var bj=0;bj<8;bj++){Z[bk][bj]=false;artgridLoad[bk][bj]=false}}u=an.loadImage("http://localhost:8888/facebook");ai=an.loadImage("http://localhost:8888/exit.png");n=an.loadImage("http://localhost:8888/heartbasket.png");a9=an.loadShape("http://localhost:8888/heart.svg");z=an.loadShape("http://localhost:8888/greyHeart.svg");c=an.loadImage("http://localhost:8888/wikibio.png")}an.setup=aM;function b(bm,bk){if(bm!=P||bk!=a1){P=bm;a1=bk;$("#parent").css("width",bm).css("height",bk);h=30;H=0;an.size(P,a1);aw=P;ad=a1;al=P-aF-284;toolLeft=P/2-toolWidth/2;w=P-aF;if(a1<870){var bj=870;var bl=0;while(bj>a1&&bl<5){bj-=22;bl++}v=ak+558-57-bl*22;aq=v+270;songsToShow=10-bl;D=v-18;$("#dialogWindow").css("top",353-bl*22-57)}else{v=ak+558-57;aq=v+270;songsToShow=10;D=v-18;$("#dialogWindow").css("top",353-57)}l.resetSize();aO=an.map(aw,0,bd,0,284);aN=an.map(ad,0,aI,0,270);T.setMins();au=al+40;Y.play.newPos(al+72,D);Y.ffwd.newPos(w-20,D);ba=al+95;au=al+40;seekRight=w-40-ah;aJ=al;ay=w;o=v-230;a7=v}}an.setUpSize=b;var a9=null,z=null;var u=null,n=null,ai=null,c=null;function at(){an.colorMode(an.RGB);aL=an.createJavaArray("$p.color",[10]);m=an.createJavaArray("$p.color",[10]);aL[0]=an.color(255,0,0);aL[1]=an.color(255,103,0);aL[2]=an.color(255,182,0);aL[3]=an.color(231,255,0);aL[4]=an.color(0,255,18);aL[5]=an.color(0,255,212);aL[6]=an.color(0,104,155);aL[7]=an.color(149,0,255);aL[8]=an.color(248,0,255);aL[9]=an.color(255,3,141);m[0]=an.color(0,153,153);m[1]=an.color(100,168,209);m[2]=an.color(133,133,232);m[3]=an.color(230,113,255);m[4]=an.color(255,128,157);m[5]=an.color(255,176,128);m[6]=an.color(255,195,100);m[7]=an.color(249,243,140);m[8]=an.color(222,244,130);m[9]=an.color(204,255,123)}an.setUpColors=at;function aD(){T.draw();an.imageMode(an.CORNER);an.image(logo,0,0);l.draw();if(bf&&bf.list&&bf.list.length){toolBox.draw()}Y.draw();if(X>-1){bi(X)}}an.draw=aD;var bf=null;var a0=new an.HashMap();var V=[];var aL=[];var aU=new an.ArrayList();function aH(){$.getJSON("http://localhost:8888/loc/browse?city=NYC&hasLoc=8&public=4",function(bk){if(bk&&bk.locs){for(var bj=0;bj<bk.locs.length;bj++){aU.add(bk.locs[bj])}}});$.getJSON("http://localhost:8888/loc/getTypes",function(bk){if(bk&&bk.types){for(var bj=0;bj<bk.types.length;bj++){a0.put(bk.types[bj]._id,an.requestImage("http://localhost:8888/loc/getTypeIcon?_id="+bk.types[bj]._id));aL[bk.types[bj]._id]=an.color(bk.types[bj].r,bk.types[bj].g,bk.types[bj].b);V[bk.types[bj]._id]=bk.types[bj].mediaType}}})}an.setUpLocations=aH;var E=0,C=0,a6=0,a3=0;var aw=0,ad=0,aO=0,aN=0;function aW(bk,bj){var bl=null;if((bk==0)||(bk==1&&bj<1)){bl="0";bl+=String(bk*8+bj+1)+".grid"}else{bl=String(bk*8+bj+1)+".grid"}Z[bk][bj]=true;aj[bk][bj]=an.requestImage("http://localhost:8888/"+bl)}an.loadMapPiece=aW;function aS(bk,bj){var bl=null;if((bk==0)||(bk==1&&bj<1)){bl="0";bl+=String(bk*8+bj+1)+".art.grid"}else{bl=String(bk*8+bj+1)+".art.grid"}artgridLoad[bk][bj]=true;artgrid[bk][bj]=an.requestImage("http://localhost:8888/"+bl)}an.loadArtMapPiece=aS;var aQ=false;var aZ=false;function I(){T.keyPressed();if(an.key==(new an.Character("a"))){aQ=true;aZ=false;artmode=false}else{if(an.key==(new an.Character("r"))&&aQ){aZ=true;artmode=false}else{if(an.key==(new an.Character("t"))&&aQ&&aZ){artmode=true;alert("you have found the secret artmode! congrats!")}else{artmode=false}}}}an.keyPressed=I;var ag=0,af=0,a4=0,a2=0;var j=-1;var X=-1;function bi(bj){var bl=aU.get(bj);an.textSize(18);var bk=an.textWidth(bl.title);an.stroke(aL[bl.type]);an.fill(0);an.rectMode(an.CORNERS);an.rect(an.mouseX,an.mouseY-33,an.mouseX+bk+12,an.mouseY-7,10);an.fill(aL[bl.type]);an.textAlign(an.LEFT,an.TOP);an.text(bl.title,an.mouseX+6,an.mouseY-30)}an.drawHoverInfo=bi;function y(){if(X>=0){bf=aU.get(X);playingVideo=0;l.resetSize();l.resetPage();s()}else{if(j>=0){playingVideo=j;s()}else{if(toolHover>=0){toolBox.mouseClicked()}else{if(ar){l.nextPage()}else{if(r){l.previousPage()}}}}}}an.mouseClicked=y;function aP(){if(an.mouseY<a7&&an.mouseY>o&&an.mouseX<ay&&an.mouseX>aJ){Y.mousePressed()}else{if(an.mouseX>al&&an.mouseX<w&&an.mouseY>ak&&an.mouseY<aq){if(an.mouseY<v){l.mousePressed()}else{T.miniMousePressed()}}else{T.mousePressed()}}}an.mousePressed=aP;function aK(){Y.mouseDragged();T.mouseDragged();T.miniMouseDragged()}an.mouseDragged=aK;function F(){T.mouseOut();Y.mouseReleased()}an.mouseOut=F;function a(){Y.mouseReleased();T.mouseReleased();T.miniMouseReleased()}an.mouseReleased=a;var g=-1;var aa=1;var e=0;var O=true;function aT(){for(var bj=songs.size()-1;bj>-1;bj--){if(bj==S&&aC){songs.get(bj).stopSong()}songs.remove(bj)}S=-1;song=null}an.resetSongs=aT;function ab(){stopVideo();if(playingVideo<bf.list.length-1){playingVideo++;s()}else{bh()}}an.createNext=ab;var ae=null;function bh(){var bl=false;for(var bj=0;bj<ae.size();bj++){if(ae.get(bj)==bf._id){bl=true;break}}if(!bl){ae.add(bf._id)}for(var bj=0;bj<aU.size();bj++){var bk=aU.get(bj);if(bk.x>E&&bk.x<a6&&bk.y>C&&bk.y<a3&&!an.__contains(ae,bk._id)){bf=bk;playingVideo=0;s()}}}an.nextLocation=bh;function R(bk,bj){this.length=bk;this.index=bj}function i(bm,bq,bo,bp,bj,bt){if(an.textWidth(bm)>bp){var br=B.get(bm+an.textWidth(bm));if(br==null){br=new R(0,0);B.put(bm+an.textWidth(bm),br)}var bl=br.index;var bn=bm.length;if(br.length>=an.textWidth(bm.charAt(bl))){if(bl<bn-1){br.index++;bl++;br.length=0}else{br.index=bl=0;br.length=-40}}var bs=an.textWidth(bm.charAt(bl))-br.length;bl++;while(bs<bp&&bl<bn){bs+=an.textWidth(bm.charAt(bl));bl++}an.text(bm.substring(br.index,bl),bq-br.length,bo);if(bl==bn){bs+=40;var bk=0;while(bs<bp){bs+=an.textWidth(bm.charAt(bk));bk++}an.text(bm.substring(0,bk),bq+an.textWidth(bm.substring(br.index,bl))-br.length+40,bo)}an.noStroke();an.fill(0);an.rectMode(an.CORNERS);an.rect(bq-an.textWidth((new an.Character("W"))),bo+bt,bq,bo);an.rect(bq+bp,bo,bq+bp+an.textWidth((new an.Character("W"))),bo+bt);an.fill(bj);br.length++;B.put(bm+an.textWidth(bm),br)}else{an.text(bm,bq,bo)}}an.checkText=i;var bc=0;var t=1;var ar=false,r=false;var aY=0;var ak=0,al=0,v=0,w=0,J=0,aR=0;var S=-1;var av=-1;var M=false;var W=50;var bg=false;var ah=0,ba=0,au=0;var ay=0,aJ=0,o=0,a7=0,D=0;function aX(bl){var bk=an.__int_cast((bl%60));var bj=an.__int_cast(((bl%3600)/60));var bm=null;if(bk==0){bm="00"}else{if(bk<10){bm="0"+bk}else{bm=bk}}return(bj+":"+bm)}an.makeTime=aX;function N(){if(bf.list&&playingVideo<bf.list.length-1){playingVideo++;s()}else{bh()}}an.videoEnded=N;function ap(){$("#ytplayer").html('<script type="text/javascript">var params = { allowScriptAccess: "always" };var atts = { id: "YouTubeP" };swfobject.embedSWF("http://www.youtube.com/apiplayer?enablejsapi=1&version=3", "ytplayer", "283", "200", "8", null, null, params, atts);<\/script>')}an.togglePlayer=ap;var a5=null;var q=false;var ao=1;var be=2;function aB(){a5=document.getElementById("YouTubeP");q=be;a5.setVolume(W)}an.prepPlayer=aB;function s(){if(bf.list&&bf.list.length>0){a5.loadVideoById(bf.list[playingVideo].ytid);$.ajax({url:"http://localhost:8888/loc/view",data:{_id:bf._id,position:playingVideo,city:"NYC"}})}else{if(bf.ytid){a5.loadVideoById(bf.ytid);$.ajax({url:"http://localhost:8888/loc/view",data:{_id:bf._id,city:"NYC"}})}}}an.loadVideo=s;function aV(bm,bk){var bn=null;if(bm==bf._id){bn=false}else{bn=true}for(var bl=0;bl<aU.size();bl++){if(bm==aU.get(bl)._id){bf=aU.get(bl);a4=an.map(bf.x,531.749,531.749+853,0,bd);a2=an.map(bf.y,231.083,231.083+810,0,aI);ag=an.map(a4,0,bd,0,284);af=an.map(a2,0,aI,0,270);T.setMins();if(bk&&bf.list){for(var bj=0;bj<bf.list.length;bj++){if(bf.list[bj].RID==bk){playingVideo=bj;s();if(bn){l.resetSize();l.resetPage()}}}}else{playingVideo=0;s();if(bn){l.resetSize();l.resetPage()}}}}}an.playVideo=aV;function U(){$.getJSON("http://localhost:8888/getBio?id="+artist.RID,function(bj){if(bj!=null){$("div#biolog").html("<b>"+artist.name+"</b><br /><p>"+bj.text+'<br /><br />Source: <a href="'+bj.url+'">Wikipedia</a></p>');$("div#biolog",window.parent.document).scrollTop(0)}});if(!$("div#biolog").dialog("isOpen")){$("div#biolog").dialog("open")}}an.prepareBio=U})
);    
});
</script>
    <script type="text/javascript">     
  $(function() { //initiator constructor
    $('#overlay').dialog({
      autoOpen: false,
      width: 'auto',
      show: 'fade',
      hide: 'fade',
      maxHeight: '500',
      close: function(event, ui) {
        $('this').html("");
      }
    });
  });
  
function toggleFav(element, id, userid) { //toggle favs
      if(($(element).html().indexOf("greyHeart") > -1)) { // simulate xor with rev to reverse value
        $(element).html("<img src=\"http://localhost:8888/heart.svg\" width=\"20\" height=\"20\" border=\"0\" /\>");
        $.get('http://localhost:8888/addSong', { "songid": id, "userid": userid });
      } else {
        $(element).html("<img src=\"http://localhost:8888/greyHeart.svg\" width=\"20\" height=\"20\" border=\"0\" /\>");
        $.get('http://localhost:8888/removeSong', { "songid": id, "userid": userid });
      }
  }
        
  function playSong(artist, fullid){
    var splitid = fullid.split(' ');
    var p = Processing.getInstanceById('canvas');
    if(artist) p.playSong(splitid[0],0);
    else p.playSong(splitid[0],splitid[1]);
  }
  
  function updatePageInfo(songid, artistid, songName, artistName) {   // updates toolbox
    // Twitter
    //!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    //$('#toolbox-twitter').attr('data-text'/*text of tweet*/, "I'm listening to " + songName + " by " + artistName + " at localhost:8888!");
    //$("#fbLikeContainer").html('<div class="fb-like" data-href="http://localhost:8888/song/'+artistid+'/'+songid+ '" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-action="recommend" data-colorscheme="dark"></div>');
    document.title = "RapCities Alpha - " + artistName + ' - - ' + songName;
    window.history.pushState(songName,null, "http://localhost:8888/song/"+artistid+"/"+songid);
  }
  
  
  function showLegal(number){
	$("div#legalDialog").dialog("open");
	switch(number){
		case 0: $("div#legalDialog").html($('#DMCA').html());
	  		$('div#legalDialog', window.parent.document).scrollTop(0);
			break;	 
		case 1: $("div#legalDialog").html($('#TOS').html());
		  	$('div#legalDialog', window.parent.document).scrollTop(0);
			break;
		case 2: $("div#legalDialog").html($('#PP').html());
		  	$('div#legalDialog', window.parent.document).scrollTop(0);
			break;
	}
  }

</script>
<script type="text/javascript">
	function onYouTubePlayerReady(playerId){	document.getElementById('YouTubeP').addEventListener("onStateChange","onytplayerStateChange");
	Processing.getInstanceById('canvas').prepPlayer();	
	}
	
	function onytplayerStateChange(newState) {
	   if(newState == 0){
		Processing.getInstanceById('canvas').videoEnded();
	   }
	}	
</script>
<script>
$(document).ready(function() {
	$("div#biolog").dialog({
		autoOpen: false,
		resizable: false,
		height: 360,
		width: 385,
		position: ['left','bottom'],
		stack:false
	});
	$("div#legalDialog").dialog({
		autoOpen: false,
		resizable: false,
		height: 500,
		width: 500,
		modal:true
	});
	$("#instructionDialog").html($('#instructions').html());
	$("div#instructionDialog").dialog({
		autoOpen: true,
		resizable: false,
		height: 300,
		width: 350,
		modal:true,
		zIndex:3049
	});
  	
});

$(window).resize(function(){
	if($(window).width() < 700 || $(window).height() < 770){
		var p = Processing.getInstanceById('canvas');
		p.setUpSize(Math.max($(window).width(),700),Math.max(770,$(window).height()));
		//$("#dialogWindow").css("position","fixed");
		$("body").css("overflow","visible");
	}
	else{
		var p = Processing.getInstanceById('canvas');
		p.setUpSize($(window).width(),$(window).height());
		$("body").css("overflow","hidden");
		$("#parent").css("width",$(window).width()).css("height",$(window).height());
	}
});
</script>
</head>
<body>
<div id="overlay" title="Favourites"></div>

<div id="parent">
  
  <canvas id="canvas">
    <font size="10" color="white">Your browser doesn't support HTML5! Please
      and use the latest version of Mozilla Firefox or Google Chrome.</font>
  </canvas>
<div id="dialogWindow">
	<div id="ytplayer">
		<p>Loading Site <br /> <br /> If it takes forever, you probably don't have Flash Player 8+ and/or JavaScript enabled.</p>

	</div>
</div>
<div id="instructions" style="display:none"><br />RapCities is a video game-like experience built in a browser. You can move around the virtual city using your arrow keys, by clicking and dragging anywhere on the map, or by clicking somewhere on the mini-map at the bottom right-hand corner of the screen. </div>

<div id="PP" style="display:none"><b>Your privacy is important to us!</b><br />Rapcities stores information that we collect through cookies, log files, and clear gifs to create a "profile" of your preferences. This statistical information may be used to help Rapcities provide tailored services and to improve the content of the site for you.  Giving us your personal data on this site is completely optional and will require you to setup an account with a password and an email address. You may also submit additional personal information (including data on your profile and on message boards). Please remember that any information you submit becomes public information that can be viewed by others.  The Publish Playback feature allows users who are logged into their Rapcities accounts to share playlist data information from the Rapcities Player. By default, the Publish Playback feature is enabled for users who have logged into the Rapcities Player. Users may opt out of this feature by disabling Publish Playback in the Rapcities Player settings menu. With Rapcities Web Player, Publish Playback is always on, however, users may logout to avoid attributing plays to their account.  We may use the email address provided by you to contact you from time to time about offers, or other related services. We will NOT share your personally identifiable information (email address, first or last name, etc.) with ANY third-party or partner unless you explicitly request us to do so.  The Rapcities service may display links to third party sites. We advise you to check their terms of use and privacy policies before submitting your personal information to them.  Google, a third party vendor, may use cookies to serve advertisements on the Rapcities site. Google's use of the DART cookie enables it to serve ads to our users based on their visit to our site and other sites on the Internet. Users may opt out of the use of the DART cookie by visiting the Google ad and content network privacy policy.  We partner with ValueClick to serve ads and/or collect certain information when you visit our website. ValueClick may use cookies or web beacons to collect non-personally identifiable information during your visit to this website in order to help show advertisements on other websites likely to be more interesting to you. To learn more about this "behavioral advertising" practice or to opt-out of this use of your anonymous information, you can visit http://valueclickmedia.com/member_privacy.shtml</div>
<div id="TOS" style="display:none"><b>Your Acceptance</b><br />By using and/or visiting this website, including all content and functionality available through the localhost:8888 domain name, the Rapcities Website, Rapcities Player, Rapcities Encoder, other software, Website, or collectively “Rapcities”, you signify your agreement to these terms and conditions (the "Terms of Service"), and Rapcities’ privacy policy, found at http://www. localhost:8888/privacypolicy.php incorporated here by reference, and any License agreements for software from Rapcities Inc., including but not limited to the Rapcities Player and Encoder, which you choose to install on your computer. If you do not agree to any of these terms, the Rapcities privacy notice, or the applicable software license agreements, please do not use Rapcities.  Although we may attempt to notify you when major changes are made to these Terms of Service, you should periodically review the most up-to-date version available on http://www. localhost:8888/tos.php. Rapcities may, in its sole discretion, modify or revise these Terms of Service and policies at any time, and you agree to be bound by such modifications or revisions. Nothing in this Agreement shall be deemed to confer any third-party rights or benefits.  Rapcities does not host any audio, video, or collectively "multimedia" files. Rapcities aggregates certain content from the YouTube API. You need to become familiar with and agree to the YouTube terms of service notice found at http://www.youtube.com/t/terms, the YouTube privacy notice found at http://www.youtube.com/t/privacy and the YouTube Community Guidelines found at http://www.youtube.com/t/community_guidelines before using Rapcities.   These Terms of Service apply to all users of Rapcities, including users who are also contributors of multimedia content, information, and other materials or services on Rapcities. Rapcities includes the website and all other aspects, including but not limited to all products, software and services.  Rapcities may contain links to third party websites that are not owned or controlled by Rapcities. Rapcities has no control over, and assumes no responsibility for, the content, privacy policies, or practices of any third party websites. In addition, Rapcities will not and cannot censor or edit the content of any third-party site. By using Rapcities, you expressly relieve Rapcities from any and all liability arising from your use of any third-party website. Accordingly, we encourage you to read the terms and conditions and privacy policy of each other website that you visit.  You understand that when using the Rapcities Website, you will be exposed to User Submissions from a variety of sources, and that Rapcities is not responsible for the accuracy, usefulness, safety, or intellectual property rights of or relating to such User Submissions. You further understand and acknowledge that you may be exposed to User Submissions that are inaccurate, offensive, indecent, or objectionable, and you agree to waive, and hereby do waive, any legal or equitable rights or remedies you have or may have against Rapcities with respect thereto, and agree to indemnify and hold Rapcities, its Owners/Operators, affiliates, and/or licensors, harmless to the fullest extent allowed by law regarding all matters related to your use of the site.  You are responsible for any activity that occurs under your IP and/or User name. You are responsible for keeping your password secure. Rapcities will not be liable for your losses caused by any unauthorized use of your account; you may be liable for the losses of Rapcities or others due to such unauthorized use. You may not use Rapcities for any illegal or unauthorized purpose. All users agree to comply with all local laws regarding online conduct and acceptable content. You are solely responsible for your conduct and any data, text, information, screen names, graphics, photos, audio, videos, profiles, links (“content”) that you submit, post, and display on “Rapcities”, the localhost:8888 website, or other services including but not limited to the Rapcities Player. You agree not to circumvent, disable or otherwise interfere with security-related features of the Rapcities Website or features that prevent or restrict use or copying of any Content or enforce limitations on use of the Rapcities Website or the Content therein. You must not, in the use of Rapcities, violate any laws in your jurisdiction, or national, and international laws and regulations (including but not limited to copyright laws). Rapcities reserves the right to discontinue any aspect of our services at any time. Rapcities will terminate a User's access to its Website if, under appropriate circumstances, they are determined to be a repeat infringer.  <br /><b>Digital Millennium Copyright Act - YouTube Content ("On-Demand")</b><br />		All On-Demand streaming music, audio, video content and related services accessed through Rapcities are stored on YouTube’s servers, aggregated through the YouTube API and streamed through the YouTube chromeless player. YouTube LLC is fully compliant with the laws of the Digital Millennium Copyright Act.  A. If you are a copyright owner or an agent thereof and believe that any User Submission or other content infringes upon your copyrights, you may submit a notification pursuant to the Digital Millennium Copyright Act ("DMCA") by providing our Copyright Agent with the following information in writing (see 17 U.S.C 512(c)(3) for further detail):   * A physical or electronic signature of a person authorized to act on behalf of the owner of an exclusive right that is allegedly infringed;  * Identification of the copyrighted work claimed to have been infringed, or, if multiple copyrighted works at a single online site are covered by a single notification, a representative list of such works at that site;  * Identification of the material that is claimed to be infringing or to be the subject of infringing activity and that is to be removed or access to which is to be disabled and information reasonably sufficient to permit the service provider to locate the material;  * Information reasonably sufficient to permit the service provider to contact you, such as an address, telephone number, and, if available, an electronic mail;  * A statement that you have a good faith belief that use of the material in the manner complained of is not authorized by the copyright owner, its agent, or the law; and  * A statement that the information in the notification is accurate, and under penalty of perjury, that you are authorized to act on behalf of the owner of an exclusive right that is allegedly infringed.   YouTube's designated Copyright Agent to receive notifications of claimed infringement is: Heather Gillette, 901 Cherry Ave., San Bruno, CA 94066, email: copyright@youtube.com, fax: 650-872-8513. For clarity, only DMCA notices should go to the Copyright Agent; any other feedback, comments, requests for technical support, and other communications should be directed to YouTube customer service through http://www.google.com/support/youtube. You acknowledge that if you fail to comply with all of the requirements of this Section, your DMCA notice may not be valid.  B. Counter-Notice. If you believe that your User Submission that was removed (or to which access was disabled) is not infringing, or that you have the authorization from the copyright owner, the copyright owner's agent, or pursuant to the law, to post and use the content in your User Submission, you may send a counter-notice containing the following information to the Copyright Agent:   * Your physical or electronic signature;  * Identification of the content that has been removed or to which access has been disabled and the location at which the content appeared before it was removed or disabled;  * A statement that you have a good faith belief that the content was removed or disabled as a result of mistake or a misidentification of the content; and  * Your name, address, telephone number, and e-mail address, a statement that you consent to the jurisdiction of the federal court in San Francisco, California, and a statement that you will accept service of process from the person who provided notification of the alleged infringement.   If a counter-notice is received by the Copyright Agent, YouTube may send a copy of the counter-notice to the original complaining party informing that person that it may replace the removed content or cease disabling it in 10 business days. Unless the copyright owner files an action seeking a court order against the content provider, member or user, the removed content may be replaced, or access to it restored, in 10 to 14 business days or more after receipt of the counter-notice, at YouTube's sole discretion.  <b><br />Digital Millennium Copyright Act - Other Content ("Non-YouTube")</b><br />Rapcities does not store any audio-visual content for streaming or downloading on our servers. The Rapcities website, forums and software may contains links to user-submitted audio-visual content stored on third party servers. Rapcities Inc. is fully compliant with the laws of the Digital Millennium Copyright Act.  Please note that any claims against YouTube-related content must be made to YouTube itself (See Digital Millennium Copyright Act – YouTube Content  above for details). Any DMCA claims sent to Rapcities that pertain to YouTube content will be ignored.   If you believe that your work has been copied in a way that constitutes copyright infringement, or that your intellectual property rights have been otherwise violated, please provide a written document by regular Postal mail with the instructions given below. Rapcities will take all necessary actions to remove/delete material/links claimed to be the subject of infringing activity.  Understand that you will be held liable for damages if you falsify any activity, mislead or misrepresent yourself as the rightful copyright owner or representative thereof.  In the DMCA complaint claim please include the following in English:  * Describe and identify the copyrighted work claimed to have been infringed, or, if multiple copyrighted works at a single online site are covered by a single notification, a representative list of such works at that site.  * A description of where the material that you claim is infringing is located within the Rapcities site/software, with enough detail that we are able to locate it. * Include your name, phone number, postal address, email address and any other company/record label information. * Sign the document with your legal name. * Understand, upon signing this document, you claim to be the owner of the copyrighted piece that is being infringed upon or are authorized to act on behalf of the owner of the copyright or other intellectual property interest.  Send the letter to the following address:  Rapcities Inc.  Attn: DMCA Complaints 16 Chauncy St. #52 Cambridge, MA 02138   <br /><b>Warranty Disclaimer</b><br />YOU AGREE THAT YOUR USE OF RAPCITIES SHALL BE AT YOUR SOLE RISK. TO THE FULLEST EXTENT PERMITTED BY LAW, RAPCITIES, ITS OFFICERS, DIRECTORS, EMPLOYEES, AND AGENTS DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, IN CONNECTION WITH RAPCITIES AND YOUR USE THEREOF. RAPCITIES MAKES NO WARRANTIES OR REPRESENTATIONS ABOUT THE ACCURACY OR COMPLETENESS OF THIS SITE'S CONTENT OR THE CONTENT OF ANY SITES LINKED TO THIS SITE AND ASSUMES NO LIABILITY OR RESPONSIBILITY FOR ANY (I) ERRORS, MISTAKES, OR INACCURACIES OF CONTENT, (II) PERSONAL INJURY OR PROPERTY DAMAGE, OF ANY NATURE WHATSOEVER, RESULTING FROM YOUR ACCESS TO AND USE OF OUR WEBSITE, PLAYER, ENCODER, OR OTHER RAPCITIES SERVICES. (III) ANY UNAUTHORIZED ACCESS TO OR USE OF OUR SECURE SERVERS AND/OR ANY AND ALL PERSONAL INFORMATION AND/OR FINANCIAL INFORMATION STORED THEREIN, (IV) ANY INTERRUPTION OR CESSATION OF TRANSMISSION TO OR FROM OUR WEBSITE, (IV) ANY BUGS, VIRUSES, TROJAN HORSES, OR THE LIKE WHICH MAY BE TRANSMITTED TO OR THROUGH OUR WEBSITE BY ANY THIRD PARTY, AND/OR (V) ANY ERRORS OR OMISSIONS IN ANY CONTENT OR FOR ANY LOSS OR DAMAGE OF ANY KIND INCURRED AS A RESULT OF THE USE OF ANY CONTENT POSTED, EMAILED, TRANSMITTED, OR OTHERWISE MADE AVAILABLE VIA THE RAPCITIES WEBSITE, PLAYER, ENCODER, OR SOFTWARE, OR OTHER RAPCITIES SERVICES. RAPCITIES DOES NOT WARRANT, ENDORSE, GUARANTEE, OR ASSUME RESPONSIBILITY FOR ANY PRODUCT OR SERVICE ADVERTISED OR OFFERED BY A THIRD PARTY THROUGH THE RAPCITIES WEBSITE, PLAYER, ENCODER, OR SOFTWARE, OR OTHER RAPCITIES SERVICES, OR ANY HYPERLINKED WEBSITE OR FEATURED IN ANY BANNER OR OTHER ADVERTISING, AND RAPCITIES WILL NOT BE A PARTY TO OR IN ANY WAY BE RESPONSIBLE FOR MONITORING ANY TRANSACTION BETWEEN YOU AND THIRD-PARTY PROVIDERS OF PRODUCTS OR SERVICES. AS WITH THE PURCHASE OF A PRODUCT OR SERVICE THROUGH ANY MEDIUM OR IN ANY ENVIRONMENT, YOU SHOULD USE YOUR BEST JUDGMENT AND EXERCISE CAUTION WHERE APPROPRIATE.  <br /><b>Limitation of Liability</b><br />IN NO EVENT SHALL RAPCITIES, ITS OFFICERS, DIRECTORS, EMPLOYEES, OR AGENTS, BE LIABLE TO YOU FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, PUNITIVE, OR CONSEQUENTIAL DAMAGES WHATSOEVER RESULTING FROM ANY (I) ERRORS, MISTAKES, OR INACCURACIES OF CONTENT, (II) PERSONAL INJURY OR PROPERTY DAMAGE, OF ANY NATURE WHATSOEVER, RESULTING FROM YOUR ACCESS TO AND USE OF OUR WEBSITE, SOFTWARE, PLAYER, ENCODER, OR OTHER RAPCITIES SERVICES. (III) ANY UNAUTHORIZED ACCESS TO OR USE OF OUR SECURE SERVERS AND/OR ANY AND ALL PERSONAL INFORMATION AND/OR FINANCIAL INFORMATION STORED THEREIN, (IV) ANY INTERRUPTION OR CESSATION OF TRANSMISSION TO OR FROM OUR WEBSITE, (IV) ANY BUGS, VIRUSES, TROJAN HORSES, OR THE LIKE, WHICH MAY BE TRANSMITTED TO OR THROUGH OUR WEBSITE BY ANY THIRD PARTY, AND/OR (V) ANY ERRORS OR OMISSIONS IN ANY CONTENT OR FOR ANY LOSS OR DAMAGE OF ANY KIND INCURRED AS A RESULT OF YOUR USE OF ANY CONTENT POSTED, EMAILED, TRANSMITTED, OR OTHERWISE MADE AVAILABLE VIA THE RAPCITIES WEBSITE, PLAYER, ENCODER, OR SOFTWARE, OR OTHER RAPCITIES SERVICES, WHETHER BASED ON WARRANTY, CONTRACT, TORT, OR ANY OTHER LEGAL THEORY, AND WHETHER OR NOT THE COMPANY IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. THE FOREGOING LIMITATION OF LIABILITY SHALL APPLY TO THE FULLEST EXTENT PERMITTED BY LAW IN THE APPLICABLE JURISDICTION. YOU SPECIFICALLY ACKNOWLEDGE THAT RAPCITIES SHALL NOT BE LIABLE FOR USER SUBMISSIONS OR THE DEFAMATORY, OFFENSIVE, OR ILLEGAL CONDUCT OF ANY THIRD PARTY AND THAT THE RISK OF HARM OR DAMAGE FROM THE FOREGOING RESTS ENTIRELY WITH YOU.  The Website is controlled and offered by Rapcities from its facilities in the United States of America. Rapcities makes no representations that the Rapcities Website is appropriate or available for use in other locations. Those who access or use the Rapcities Website from other jurisdictions do so at their own volition and are responsible for compliance with local law.  <br /><b>Indemnity</b><br />You agree to defend, indemnify and hold harmless Rapcities, its officers, directors, employees and agents, from and against any and all claims, damages, obligations, losses, liabilities, costs or debt, and expenses (including but not limited to attorney's fees) arising from: (i) your use of and access to the Rapcities Website, Player, Encoder, software, or other Rapcities services; (ii) your violation of any term of these Terms of Service; (iii) your violation of any third party right, including without limitation any copyright, property, or privacy right; or (iv) any claim that one of your User Submissions caused damage to a third party. This defense and indemnification obligation will survive these Terms of Service and your use of the Rapcities Website.  <br /><b>Ability to Accept Terms of Service</b><br />You affirm that you are either more than 18 years of age, or an emancipated minor, or possess legal parental or guardian consent, and are fully able and competent to enter into the terms, conditions, obligations, affirmations, representations, and warranties set forth in these Terms of Service, and to abide by and comply with these Terms of Service. In any case, you affirm that you are over the age of 13, as the Rapcities Website is not intended for children under 13. If you are under 13 years of age, then please do not use the Rapcities Website. <br /><b>Assignment</b><br />These Terms of Service, and any rights and licenses granted hereunder, may not be transferred or assigned by you, but may be assigned by Rapcities without restriction.</div>
<div id="DMCA" style="display:none">	<b>Digital Millennium Copyright Act - YouTube Content ("On-Demand")</b><br />All On-Demand streaming music, audio, video content and related services accessed through Rapcities is stored on YouTube’s servers, aggregated through the YouTube API and streamed through the YouTube chromeless player. YouTube LLC is fully compliant with the laws of the Digital Millennium Copyright Act.  A. If you are a copyright owner or an agent thereof and believe that any User Submission or other content infringes upon your copyrights, you may submit a notification pursuant to the Digital Millennium Copyright Act ("DMCA") by providing our Copyright Agent with the following information in writing (see 17 U.S.C 512(c)(3) for further detail):   * A physical or electronic signature of a person authorized to act on behalf of the owner of an exclusive right that is allegedly infringed;  * Identification of the copyrighted work claimed to have been infringed, or, if multiple copyrighted works at a single online site are covered by a single notification, a representative list of such works at that site;  * Identification of the material that is claimed to be infringing or to be the subject of infringing activity and that is to be removed or access to which is to be disabled and information reasonably sufficient to permit the service provider to locate the material;  * Information reasonably sufficient to permit the service provider to contact you, such as an address, telephone number, and, if available, an electronic mail;  * A statement that you have a good faith belief that use of the material in the manner complained of is not authorized by the copyright owner, its agent, or the law; and  * A statement that the information in the notification is accurate, and under penalty of perjury, that you are authorized to act on behalf of the owner of an exclusive right that is allegedly infringed.   YouTube's designated Copyright Agent to receive notifications of claimed infringement is: Heather Gillette, 901 Cherry Ave., San Bruno, CA 94066, email: copyright@youtube.com, fax: 650-872-8513. For clarity, only DMCA notices should go to the Copyright Agent; any other feedback, comments, requests for technical support, and other communications should be directed to YouTube customer service through http://www.google.com/support/youtube. You acknowledge that if you fail to comply with all of the requirements of this Section, your DMCA notice may not be valid.  B. Counter-Notice. If you believe that your User Submission that was removed (or to which access was disabled) is not infringing, or that you have the authorization from the copyright owner, the copyright owner's agent, or pursuant to the law, to post and use the content in your User Submission, you may send a counter-notice containing the following information to the Copyright Agent:   * Your physical or electronic signature;  * Identification of the content that has been removed or to which access has been disabled and the location at which the content appeared before it was removed or disabled;  * A statement that you have a good faith belief that the content was removed or disabled as a result of mistake or a misidentification of the content; and  * Your name, address, telephone number, and e-mail address, a statement that you consent to the jurisdiction of the federal court in San Francisco, California, and a statement that you will accept service of process from the person who provided notification of the alleged infringement.   If a counter-notice is received by the Copyright Agent, YouTube may send a copy of the counter-notice to the original complaining party informing that person that it may replace the removed content or cease disabling it in 10 business days. Unless the copyright owner files an action seeking a court order against the content provider, member or user, the removed content may be replaced, or access to it restored, in 10 to 14 business days or more after receipt of the counter-notice, at YouTube's sole discretion. <br /><b>Digital Millennium Copyright Act - Other Content ("Non-YouTube")</b><br />Rapcities does not store any audio-visual content for streaming or downloading on our servers. The Rapcities website, forums and software may contains links to user-submitted audio-visual content stored on third party servers. Rapcities Inc. is fully compliant with the laws of the Digital Millennium Copyright Act. <br />Please note that any claims against YouTube-related content must be made to YouTube itself (See Digital Millennium Copyright Act – YouTube Content  above for details). Any DMCA claims sent to Rapcities that pertain to YouTube content will be ignored. <br />If you believe that your work has been copied in a way that constitutes copyright infringement, or that your intellectual property rights have been otherwise violated, please provide a written document by regular Postal mail with the instructions given below. Rapcities will take all necessary actions to remove/delete material/links claimed to be the subject of infringing activity.  <br /><i>Understand that you will be held liable for damages if you falsify any activity, mislead or misrepresent yourself as the rightful copyright owner or representative thereof.</i><br />In the DMCA complaint claim please include the following in English:<br />  * Describe and identify the copyrighted work claimed to have been infringed, or, if multiple copyrighted works at a single online site are covered by a single notification, a representative list of such works at that site.  * A description of where the material that you claim is infringing is located within the Rapcities site/software, with enough detail that we are able to locate it. * Include your name, phone number, postal address, email address and any other company/record label information. * Sign the document with your legal name. * Understand, upon signing this document, you claim to be the owner of the copyrighted piece that is being infringed upon or are authorized to act on behalf of the owner of the copyright or other intellectual property interest.  Send the letter to the following address: <br /><br />Rapcities Inc.<br />Attn: DMCA Complaints<br />16 Chauncy St. #52<br />Cambridge, MA 02138	</div>
<div id="biolog" title="Artist Biography"></div>
<div id="legalDialog" title="Legal"></div>
<div id="instructionDialog" title="Welcome to RapCities!"></div>
<div id="legalbottom">&copy; 2012 Rapcities Inc. All Rights Reserved. On-demand content powered by YouTube. | <a href="javascript:void(0)" onclick="showLegal(0)">DMCA</a> | <a href="javascript:void(0)" onclick="showLegal(1)">Terms of Service</a> | <a href="javascript:void(0)" onclick="showLegal(2)">Privacy Policy</a> </div>
  <div id='artist-info'>
    <div id="top">
      <div class='type' data-type='biographies'>Biographies</div>
      <div class='type' data-type='blogs'>Blogs</div>
      <div class='type' data-type='images'>Images</div>
      <div class='type' data-type='news'>News</div>
      <div class='type' data-type='videos'>Videos</div>
      <div class='type' id='close'>Close</div>
      <div class='clear'></div>
    </div>
    <div id="center">
      <div id="biographies"></div>
      <div id="blogs"></div>
      <div id="images"></div>
      <div id="news"></div>
      <div id="videos"></div>
    </div>
    <div id="popup">
      <div id="popup-nav">
        <a id="popup-close" href="#">Close</a>
        <a id="popup-url" href="#">Go to site</a>
      </div>
      <iframe id="popup-content" src="">
    </div>
    <div class="clear"></div>
  </div>
</div>
</body>
</html>
	
